-- Animation Freeze + Toggle UI (Client-Side)
-- Works with any executor

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local animateScript = character:WaitForChild("Animate", 5)

if not animateScript then
	warn("Animate script not found!")
	return
end

-- ==== UI ====
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AnimFreezeUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 180, 0, 50)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 2
frame.BorderColor3 = Color3.fromRGB(100, 100, 255)
frame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = frame

local textLabel = Instance.new("TextLabel")
textLabel.Size = UDim2.new(1, -70, 1, 0)
textLabel.Position = UDim2.new(0, 5, 0, 0)
textLabel.BackgroundTransparency = 1
textLabel.Text = "Freeze Animation"
textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
textLabel.Font = Enum.Font.GothamBold
textLabel.TextSize = 14
textLabel.TextXAlignment = Enum.TextXAlignment.Left
textLabel.Parent = frame

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0, 50, 0, 30)
toggleBtn.Position = UDim2.new(1, -55, 0, 10)
toggleBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
toggleBtn.Text = "OFF"
toggleBtn.TextColor3 = Color3.new(1,1,1)
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 14
toggleBtn.Parent = frame

local btnCorner = Instance.new("UICorner")
btnCorner.CornerRadius = UDim.new(0, 6)
btnCorner.Parent = toggleBtn

-- ==== FREEZE LOGIC ====
local frozenTransforms = {}
local motors = {}
local connection

local function collectMotors()
	table.clear(motors)
	for _, m in ipairs(character:GetDescendants()) do
		if m:IsA("Motor6D") and m.Part0 and m.Part1 then
			table.insert(motors, m)
		end
	end
end

local function freezePose()
	collectMotors()
	table.clear(frozenTransforms)
	for _, motor in ipairs(motors) do
		frozenTransforms[motor] = motor.Transform
	end

	animateScript.Disabled = true

	if connection then connection:Disconnect() end
	connection = RunService.RenderStepped:Connect(function()
		if not character.Parent then return end
		for motor, tr in pairs(frozenTransforms) do
			if motor.Parent then
				motor.Transform = tr
			end
		end
	end)
end

local function unfreezePose()
	animateScript.Disabled = false
	if connection then
		connection:Disconnect()
		connection = nil
	end
end

-- ==== TOGGLE ====
local isFrozen = false

local function setState(freeze)
	isFrozen = freeze
	if freeze then
		freezePose()
		toggleBtn.Text = "ON"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
	else
		unfreezePose()
		toggleBtn.Text = "OFF"
		toggleBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
	end
end

toggleBtn.MouseButton1Click:Connect(function()
	setState(not isFrozen)
end)

-- Initial state
setState(false)

print("Animation Freeze UI loaded! Click the button to toggle.")
